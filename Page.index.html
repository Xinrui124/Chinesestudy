<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>我是语文小状元</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="mark">语</div>
      <div class="brandText">
        <h1>我是语文小状元</h1>
        <p class="sub">二年级 · 闯关练习 · 即时反馈 · 积分榜</p>
      </div>
    </div>
    <nav class="nav">
      <button class="navBtn active" data-view="home">首页</button>
      <button class="navBtn" data-view="game">闯关</button>
      <button class="navBtn" data-view="board">今日榜单</button>
      <button class="navBtn" data-view="teacher">题库格式</button>
    </nav>
  </header>

  <main class="container">
    <!-- 首页 -->
    <section id="view-home" class="view">
      <div class="card hero">
        <div class="heroLeft">
          <h2>先输入姓名，再选一朵花开始闯关 🌸</h2>
          <p class="muted">答对 +1 分；做错要重做，直到正确才能进入下一题。</p>

          <div class="nameRow">
            <label class="label" for="studentName">学生姓名</label>
            <input id="studentName" class="input" placeholder="例如：小明" maxlength="12" />
            <button id="btnSaveName" class="btn primary">确认姓名</button>
          </div>

          <div class="miniStats">
            <div class="pill">当前姓名：<strong id="nameText">未填写</strong></div>
            <div class="pill">今日积分：<strong id="todayScoreText">0</strong></div>
          </div>
        </div>

        <div class="heroRight">
          <div class="flowers">
            <button class="flower f1" data-topic="字词" aria-label="字词">字词</button>
            <button class="flower f2" data-topic="句子" aria-label="句子">句子</button>
            <button class="flower f3" data-topic="古诗" aria-label="古诗">古诗</button>
            <button class="flower f4" data-topic="阅读" aria-label="阅读">阅读</button>
          </div>
          <p class="hint muted">提示：四朵花对应四个主题，点一下就进入闯关。</p>
        </div>
      </div>
    </section>

    <!-- 闯关页 -->
    <section id="view-game" class="view hidden">
      <div class="card">
        <div class="row space">
          <div class="leftMeta">
            <div class="badge">二年级</div>
            <div class="badge soft" id="topicBadge">主题：—</div>
            <div class="badge soft">姓名：<span id="playerNameInGame">—</span></div>
          </div>
          <div class="rightMeta">
            <div class="scoreBox">本轮得分：<strong id="roundScore">0</strong></div>
            <div class="scoreBox">今日总分：<strong id="dayScore">0</strong></div>
          </div>
        </div>

        <div class="progress">
          <div class="bar" id="progressBar"></div>
        </div>

        <div class="qArea">
          <div class="qIndex" id="qIndex">第 1 题</div>
          <h2 class="qTitle" id="qTitle">加载中…</h2>
          <p class="qDesc muted" id="qDesc"></p>

          <!-- 动态题型容器 -->
          <div id="qBody"></div>

          <div class="feedback" id="feedback" aria-live="polite"></div>

          <div class="row space actions">
            <button class="btn" id="btnQuit">返回首页</button>
            <div class="row gap">
              <button class="btn" id="btnSkip" title="可选：老师演示时用（默认关闭）" disabled>跳过</button>
              <button class="btn primary" id="btnNext" disabled>下一题</button>
            </div>
          </div>

          <div class="muted tiny">
            说明：做错会要求重做；答对才解锁“下一题”。积分会记入“今日榜单（本机）”。
          </div>
        </div>
      </div>
    </section>

    <!-- 今日榜单 -->
    <section id="view-board" class="view hidden">
      <div class="card">
        <div class="row space">
          <div>
            <h2>今日榜单 🏆</h2>
            <p class="muted">仅记录在本机浏览器（GitHub Pages 无后端）。想做“全班同榜”，后面我可以帮你接入表单/数据库。</p>
          </div>
          <button class="btn" id="btnClearBoard">清空本机榜单</button>
        </div>

        <div class="boardGrid">
          <div class="boardCard">
            <div class="boardTitle">今天（本机）语文小状元</div>
            <div class="champ" id="champText">—</div>
            <div class="muted tiny" id="champSub">—</div>
          </div>

          <div class="boardCard">
            <div class="boardTitle">排行榜</div>
            <div id="boardList" class="boardList"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- 题库格式 -->
    <section id="view-teacher" class="view hidden">
      <div class="card">
        <h2>你给我题库时，用这个格式（我也能帮你从 Word/Excel 整理成它）</h2>
        <p class="muted">题库写在 <code>app.js</code> 里的 <code>QUESTION_BANK</code>。每题一个对象。下面是三种题型模板。</p>

        <pre class="codeBlock"><code>// 选择题（mcq）
{
  id: "ZC-001",
  topic: "字词",              // 字词 / 句子 / 古诗 / 阅读
  type: "mcq",               // mcq / match / fill
  stem: "下面哪个词语书写正确？",
  desc: "选出正确的一项。",
  options: ["高兴", "高杏", "高性", "告兴"],
  answerIndex: 0,
  explain: "“高兴”表示开心。"
}

// 拖拽配对（match）：左边拖到右边
{
  id: "JZ-001",
  topic: "句子",
  type: "match",
  stem: "把词语和意思配对（拖一拖）。",
  desc: "将左侧词语拖到右侧对应意思上。",
  pairs: [
    { left: "清澈", right: "非常透明，干净" },
    { left: "勇敢", right: "不怕困难" },
    { left: "温暖", right: "让人感觉舒适" }
  ],
  explain: "配对全对才算过关。"
}

// 填空（fill）：支持“组词/造句/补空”
{
  id: "GS-001",
  topic: "古诗",
  type: "fill",
  stem: "补全诗句：床前明月____。",
  desc: "在空格里填一个字。",
  blanks: [
    { placeholder: "____", answers: ["光"] }
  ],
  explain: "李白《静夜思》：床前明月光。"
}
</code></pre>

        <div class="muted">
          你把题库发给我时可以是：  
          1）直接粘贴文字；2）Word/Excel 内容；3）按“主题分组”的清单。  
          我会整理成上面格式并帮你放进代码里。
        </div>
      </div>
    </section>
  </main>

  <footer class="footer muted">
    © 我是语文小状元 · 二年级语文闯关
  </footer>

  <script src="app.js"></script>
</body>
</html>
